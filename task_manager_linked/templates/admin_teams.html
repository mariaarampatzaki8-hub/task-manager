{% extends "base.html" %}
{% block content %}
<h1>Διαχείριση Ομάδων</h1>

<h2>Δημιουργία ομάδας</h2>
<form method="post" action="{{ url_for('admin_teams') }}">
  <p><label>Όνομα ομάδας<br><input name="name" required></label></p>
  <p><label>Leader (username)<br><input name="leader_username" placeholder="προαιρετικό"></label></p>
  <p><button type="submit">Δημιουργία</button></p>
</form>

<hr>

<h2>Υπάρχουσες ομάδες</h2>
<table border="1" cellpadding="6">
  <tr><th>Όνομα</th><th>Leader</th><th>Ενέργειες</th></tr>
  {% for t in teams %}
    <tr>
      <td>{{ t.name }}</td>
      <td>
        {% set lead = users|selectattr('id','equalto', t.leader_id)|list %}
        {% if lead and lead[0] %}{{ lead[0].username }}{% else %}-{% endif %}
      </td>
      <td>
        <a href="{{ url_for('admin_team_members', team_id=t.id) }}">Μέλη</a>
        <form method="post" action="{{ url_for('admin_team_delete', team_id=t.id) }}" style="display:inline" onsubmit="return confirm('Διαγραφή ομάδας;');">
          <button type="submit">Διαγραφή</button>
        </form>
      </td>
    </tr>
  {% endfor %}
</table>
{% endblock %}
