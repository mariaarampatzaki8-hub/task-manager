{% extends "base.html" %}
{% block title %}Πίνακας{% endblock %}
{% block content %}

<h1 class="title" style="color:{{ user.color or 'var(--accent)' }}">
  👋 Γεια σου, {{ user.name }}!
</h1>

<div class="box">
  <h2 class="subtitle">Οι εργασίες σου</h2>
  {% if tasks %}
    <table class="table is-fullwidth is-striped">
      <thead>
        <tr><th>Τίτλος</th><th>Περιγραφή</th><th>Προθεσμία</th><th>Κατάσταση</th><th>Ενέργειες</th></tr>
      </thead>
      <tbody>
        {% for t in tasks %}
        <tr>
          <td>{{ t.title }}</td>
          <td>{{ t.description }}</td>
          <td>
            {% if t.due_date %}{{ t.due_date.strftime('%d/%m/%Y') }}{% endif %}
            {% if t.due_time %} {{ t.due_time.strftime('%H:%M') }}{% endif %}
          </td>
          <td>
            {% if t.status == 'done' %}
              <span class="tag is-success">Ολοκληρώθηκε</span>
            {% else %}
              <span class="tag is-warning">Ανοιχτή</span>
            {% endif %}
          </td>
          <td>
            {% if t.status != 'done' %}
            <form method="post" action="{{ url_for('complete_task', task_id=t.id) }}">
              <button class="button is-small is-success">Ολοκλήρωση</button>
            </form>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Δεν έχεις εργασίες ακόμα 🎉</p>
  {% endif %}
</div>

{% endblock %}
