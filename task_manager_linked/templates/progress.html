{% extends "base.html" %}
{% block title %}Î ÏÏŒÎ¿Î´Î¿Ï‚ ÎŒÎ»Ï‰Î½{% endblock %}
{% block content %}

<h1 class="title" style="color:var(--accent)">ğŸ“ˆ Î ÏÏŒÎ¿Î´Î¿Ï‚ ÎŒÎ»Ï‰Î½ Ï„Ï‰Î½ Î§ÏÎ·ÏƒÏ„ÏÎ½</h1>

{% if users %}
  {% for u in users %}
    <div class="cardish mb-4">
      <h2 class="subtitle">
        <span class="tag" style="background:{{ u.color }}; color:#fff">{{ u.name }}</span>
        <small>@{{ u.username }}</small>
      </h2>
      {% set tasks = user_tasks.get(u.id, []) %}
      {% if tasks %}
        <table class="table is-fullwidth is-striped">
          <thead><tr><th>Î•ÏÎ³Î±ÏƒÎ¯Î±</th><th>Î ÏÎ¿Î¸ÎµÏƒÎ¼Î¯Î±</th><th>ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</th><th>Î ÏÏŒÎ¿Î´Î¿Ï‚</th></tr></thead>
          <tbody>
            {% for t in tasks %}
              <tr>
                <td>{{ t.title }}</td>
                <td>
                  {% if t.due_date %}{{ t.due_date.strftime('%d/%m/%Y') }}{% endif %}
                  {% if t.due_time %} {{ t.due_time.strftime('%H:%M') }}{% endif %}
                </td>
                <td>
                  {% if t.status == 'done' %}
                    <span class="tag is-success">ÎŸÎ»Î¿ÎºÎ»Î·ÏÏ‰Î¼Î­Î½Î·</span>
                  {% else %}
                    <span class="tag is-warning">Î‘Î½Î¿Î¹Ï‡Ï„Î®</span>
                  {% endif %}
                </td>
                <td style="min-width:220px;">
                  <progress class="progress is-small" value="{{ t.progress }}" max="100">{{ t.progress }}%</progress>
                  <small>{{ t.progress }}%</small>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p>Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÏÎ³Î±ÏƒÎ¯ÎµÏ‚.</p>
      {% endif %}
    </div>
  {% endfor %}
{% else %}
  <p>Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï‡ÏÎ®ÏƒÏ„ÎµÏ‚.</p>
{% endif %}

{% endblock %}
