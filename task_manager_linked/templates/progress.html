{% extends "base.html" %}
{% block content %}
<h3 class="mb-3">Πρόοδος εργασιών</h3>

<div class="row g-4">
  <div class="col-md-4">
    <div class="card border-0 shadow">
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <span class="text-secondary">Σύνολο</span>
          <strong>{{ total }}</strong>
        </div>
        <div class="d-flex justify-content-between">
          <span class="text-secondary">Ολοκληρωμένα</span>
          <strong>{{ done }}</strong>
        </div>
        <div class="mt-3">
          <div class="d-flex justify-content-between mb-1">
            <span class="text-secondary">Μέσο ποσοστό</span>
            <strong>{{ avg }}%</strong>
          </div>
          <div class="progress" role="progressbar" aria-valuenow="{{ avg }}" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar bg-success" style="width: {{ avg }}%"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% if rows %}
  <div class="col-md-8">
    <div class="card border-0 shadow">
      <div class="card-body">
        <h6 class="mb-3">Ανά χρήστη</h6>
        <div class="table-responsive">
          <table class="table table-sm table-dark align-middle">
            <thead>
              <tr><th>Χρήστης</th><th>Σύνολο</th><th>Ολοκληρωμένα</th><th>Ανοικτά</th><th>Μ.Ο. %</th></tr>
            </thead>
            <tbody>
              {% for r in rows %}
                <tr>
                  <td>{{ r.user.username }}</td>
                  <td>{{ r.total }}</td>
                  <td>{{ r.done }}</td>
                  <td>{{ r.open }}</td>
                  <td>{{ r.avg }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
